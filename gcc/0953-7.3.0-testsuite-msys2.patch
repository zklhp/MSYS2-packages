diff -Naur gcc-7.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-conv.C.orig gcc-7.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-conv.C
--- gcc-7.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-conv.C.orig	2018-04-15 10:51:55.426615000 -0400
+++ gcc-7.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-conv.C	2018-04-15 10:55:18.305515700 -0400
@@ -1,7 +1,7 @@
 // Test for conversion from stateless lambda to function pointer.
 
 // { dg-do compile { target c++11_only } }
-// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZ1fvENKUlvE_cvPFvvEEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin *-*-hpux10* } } } } }
+// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZ1fvENKUlvE_cvPFvvEEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin *-*-msys *-*-hpux10* } } } } }
 
 inline void f()
 {
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/abi/rtti3.C gcc-6.3.0/gcc/testsuite/g++.dg/abi/rtti3.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/abi/rtti3.C	2015-03-09 02:46:34.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/abi/rtti3.C	2017-01-24 12:05:02.588504400 +0300
@@ -2,7 +2,7 @@
 // necessarily the type info object
 
 // { dg-require-weak "" }
-// { dg-skip-if "Linkonce not weak" { *-*-mingw* *-*-cygwin } { "*" } { "" } }
+// { dg-skip-if "Linkonce not weak" { *-*-mingw* *-*-cygwin *-*-msys } { "*" } { "" } }
 // { dg-final { scan-assembler ".weak\[ \t\]_?_ZTSPP1A" { target { ! { *-*-darwin* hppa*-*-hpux* } } } } }
 // { dg-final { scan-assembler-not ".weak\[ \t\]_?_ZTIPP1A" { target { ! { *-*-darwin* } } } } }
 // { dg-final { scan-assembler ".weak_definition\[ \t\]_?_ZTSPP1A" { target { *-*-darwin* } } } }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/abi/thunk4.C gcc-6.3.0/gcc/testsuite/g++.dg/abi/thunk4.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/abi/thunk4.C	2012-03-12 19:35:56.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/abi/thunk4.C	2017-01-24 12:05:02.588504400 +0300
@@ -1,5 +1,5 @@
 // { dg-require-weak "" }
-// { dg-skip-if "Linkonce not weak" { *-*-mingw* *-*-cygwin } { "*" } { "" } }
+// { dg-skip-if "Linkonce not weak" { *-*-mingw* *-*-cygwin *-*-msys } { "*" } { "" } }
 // { dg-final { scan-assembler ".weak\[ \t\]_?_ZThn._N7Derived3FooEv" { target { ! { *-*-darwin* } } } } }
 // { dg-final { scan-assembler ".weak_definition\[ \t\]_?_ZThn._N7Derived3FooEv" { target { *-*-darwin* } } } }
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/compat/struct-layout-1_generate.c gcc-6.3.0/gcc/testsuite/g++.dg/compat/struct-layout-1_generate.c
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/compat/struct-layout-1_generate.c	2016-10-14 18:37:54.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/compat/struct-layout-1_generate.c	2017-01-24 12:05:02.588504400 +0300
@@ -46,8 +46,8 @@
 const char *dg_options[] = {
 "/* { dg-options \"%s-I%s -Wno-abi\" } */\n",
 "/* { dg-options \"%s-I%s -mno-mmx -Wno-abi\" { target i?86-*-* x86_64-*-* } } */\n",
-"/* { dg-options \"%s-I%s -fno-common\" { target hppa*-*-hpux* powerpc*-*-darwin* *-*-mingw32* *-*-cygwin* } } */\n",
-"/* { dg-options \"%s-I%s -mno-mmx -fno-common -Wno-abi\" { target i?86-*-darwin* x86_64-*-darwin* i?86-*-mingw32* x86_64-*-mingw32* i?86-*-cygwin* } } */\n",
+"/* { dg-options \"%s-I%s -fno-common\" { target hppa*-*-hpux* powerpc*-*-darwin* *-*-mingw32* *-*-cygwin* *-*-msys* } } */\n",
+"/* { dg-options \"%s-I%s -mno-mmx -fno-common -Wno-abi\" { target i?86-*-darwin* x86_64-*-darwin* i?86-*-mingw32* x86_64-*-mingw32* i?86-*-cygwin* i?86-*-msys* } } */\n",
 "/* { dg-options \"%s-I%s -mno-base-addresses\" { target mmix-*-* } } */\n",
 "/* { dg-options \"%s-I%s -mlongcalls -mtext-section-literals\" { target xtensa*-*-* } } */\n"
 #define NDG_OPTIONS (sizeof (dg_options) / sizeof (dg_options[0]))
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-mangle.C gcc-6.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-mangle.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-mangle.C	2014-03-08 00:01:12.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/cpp0x/lambda/lambda-mangle.C	2017-01-24 12:05:02.588504400 +0300
@@ -12,7 +12,7 @@
   // The call operator of that type is _ZZ1giENKUlvE_clEv.
 
 // { dg-final { scan-assembler "_ZZ1giENKUlvE_clEv" } }
-// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZ1giENKUlvE_clEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin } } } } }
+// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZ1giENKUlvE_clEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin *-*-msys } } } } }
 
   algo([=]{return n+bef();});
   // The captured entities do not participate in <lambda-sig>
@@ -34,7 +34,7 @@
 	 // Type: ZN1S1fEiiEd0_UlvE_
 	 // Operator: _ZZN1S1fEiiEd0_NKUlvE_clEv
 // { dg-final { scan-assembler "_ZZN1S1fEiiEd0_NKUlvE_clEv" } }
-// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZN1S1fEiiEd0_NKUlvE_clEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin } } } } }
+// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZZN1S1fEiiEd0_NKUlvE_clEv" { target { ! { *-*-darwin* *-*-mingw* *-*-cygwin *-*-msys } } } } }
 	 []{return 1;}()
 	 // Type: ZN1S1fEiiEd0_UlvE0_
 	 // Operator: _ZZN1S1fEiiEd0_NKUlvE0_clEv
@@ -55,7 +55,7 @@
 // Type of lambda in intializer of R<int>::x: N1RIiE1xMUlvE_E
 // Corresponding operator(): _ZNK1RIiE1xMUlvE_clEv
 // { dg-final { scan-assembler "_ZNK1RIiE1xMUlvE_clEv" } }
-// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZNK1RIiE1xMUlvE_clEv" { target { ! { *-*-mingw* *-*-cygwin } } } } }
+// { dg-final { scan-assembler "weak\[^\n\r\]*_?_ZNK1RIiE1xMUlvE_clEv" { target { ! { *-*-mingw* *-*-cygwin *-*-msys } } } } }
 
 void bar()
 {
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport1.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport1.C	2010-10-10 23:25:09.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport1.C	2017-01-24 12:05:02.588504400 +0300
@@ -1,5 +1,5 @@
 // Test that inline functions are exported with -fkeep-inline-functions.
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw*} }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw*} }
 // { dg-options -fkeep-inline-functions } 
 
 __attribute__((dllexport)) inline int foo (int a) { return a;}
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport3.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport3.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport3.C	2010-10-10 23:25:09.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport3.C	2017-01-24 12:05:02.588504400 +0300
@@ -1,5 +1,5 @@
 // PR c++/42870
-// { dg-do compile { target i?86-*-cygwin *-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin i?86-*-msys *-*-mingw* } }
 // { dg-final { scan-assembler "-export:\[\\\\\"\]*_ZN2SaD1Ev" } }
 
 #define ATTRIBUTE __attribute__ ((dllexport))
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport-MI1.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport-MI1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllexport-MI1.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllexport-MI1.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw*} }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw*} }
 //  Test that non-virtual MI thunks are exported.
 
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport1.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport1.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport1.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,5 +1,5 @@
 //  PR c++/7910
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 // { dg-options { -Wall -W } }
 
 class __attribute__((dllimport)) Foo
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport10.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport10.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport10.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport10.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,7 +1,7 @@
 // PR c++/5287, c++/11021
 // Inherit a virtual method from a dllimport'd base class.
 
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 struct __attribute__((dllimport)) A
 {
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport11.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport11.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport11.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport11.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,6 +1,6 @@
 // PR target/23589
 // Template member functions do not get dllimport status of class.
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 struct __attribute__((dllimport)) Foo
 {
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport12.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport12.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport12.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport12.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,7 +1,7 @@
 // PR target/27650
 // Don't use dllimport semantics on virtual methods when initializing
 // vtables
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 // Use import lib thunk for vtable entry of explicitly virtual method,
 struct base
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport13.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport13.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport13.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport13.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,7 +1,7 @@
 //  PR c++/34749
 //  Ensure dllimport is handled correctly for friends
 
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 int  __declspec (dllimport) bar();
 int  __declspec (dllimport) baz();
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport2.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport2.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport2.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport2.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 // PR c++/9738  Dllimport attribute is overriden by later definition/redeclaration
 
 void __attribute__((dllimport)) Bar(void);
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport3.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport3.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport3.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport3.C	2017-01-24 12:05:02.604104400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 // PR 10148  Dllimport attribute of object is overriden by later
 // redefinition without attribute.
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport4.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport4.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport4.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport4.C	2017-01-24 12:05:02.619704400 +0300
@@ -1,5 +1,5 @@
 //  Report error if dllimport attribute in definition itself.
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 __attribute__((dllimport))  void bar () { }	// { dg-error "definition" }
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport5.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport5.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport5.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport5.C	2017-01-24 12:05:02.619704400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 //  Report error if static symbol definition has dllimport attribute.
 
 __attribute__((dllimport))
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport6.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport6.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport6.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport6.C	2017-01-24 12:05:02.619704400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 //  Mark class static members as dllimport.
 
 struct Baz
diff -aurp gcc-7.3.0/gcc/testsuite/g++.dg/ext/dllimport7.C.orig gcc-7.3.0/gcc/testsuite/g++.dg/ext/dllimport7.C
--- gcc-7.3.0/gcc/testsuite/g++.dg/ext/dllimport7.C.orig	2017-04-19 02:55:33.851493000 -0400
+++ gcc-7.3.0/gcc/testsuite/g++.dg/ext/dllimport7.C	2018-04-15 10:51:55.545931100 -0400
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 
 //  Report errors on definition of dllimport'd static data member . 
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport8.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport8.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport8.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport8.C	2017-01-24 12:05:02.619704400 +0300
@@ -2,7 +2,7 @@
 //  Ignore  dllimport of static members if marked inlined.
 //  or if definition follows  declaration in dllimported class.
 
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 // { dg-options { -Wall -W } }
 
 struct  __attribute__((dllimport)) Foo
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport9.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport9.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport9.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport9.C	2017-01-24 12:05:02.619704400 +0300
@@ -1,5 +1,5 @@
 //  Handle dllimport attribute for functions declared inline.
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 // { dg-options { -W } }
 
 inline __attribute__((dllimport)) void bar() { }	// { dg-warning "inline" }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport-MI1.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport-MI1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/dllimport-MI1.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/dllimport-MI1.C	2017-01-24 12:05:02.619704400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-*-cygwin* i?86-*-mingw* x86_64-*-mingw* } }
+// { dg-do compile { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* x86_64-*-mingw* } }
 //  Test handling of MI thunks in dllimported classes.
 
 // To build the dll and client app:
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/selectany1.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/selectany1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/selectany1.C	2011-01-07 17:12:43.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/selectany1.C	2017-01-24 12:05:02.635304400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-pc-cygwin } }
+// { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } }
 // { dg-do compile { target i?86-*-mingw* x86_64-*-mingw* } }
 
 // Check that selectany attribute puts symbols into link-once sections.
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/selectany2.C gcc-6.3.0/gcc/testsuite/g++.dg/ext/selectany2.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/ext/selectany2.C	2015-10-02 11:08:38.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/g++.dg/ext/selectany2.C	2017-01-24 12:05:02.635304400 +0300
@@ -1,4 +1,4 @@
-// { dg-do compile { target i?86-pc-cygwin } }
+// { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } }
 // { dg-do compile { target i?86-*-mingw* x86_64-*-mingw* } }
 
 // Check for errors with invalid usage of selectany attribute.
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/opt/vt1.C gcc-6.3.0/gcc/testsuite/g++.dg/opt/vt1.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/opt/vt1.C	2009-10-23 21:37:13.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/opt/vt1.C	2017-01-24 12:05:02.635304400 +0300
@@ -2,7 +2,7 @@
 // { dg-do compile { target fpic } }
 // { dg-options "-O2 -fpic -fno-rtti" }
 // { dg-skip-if "requires unsupported run-time relocation" { spu-*-* } { "*" } { "" } }
-// { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin } { "*" } { "" } }
+// { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin *-*-msys } { "*" } { "" } }
 // Origin: Jakub Jelinek <jakub@redhat.com>
 
 struct S
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.dg/template/spec35.C gcc-6.3.0/gcc/testsuite/g++.dg/template/spec35.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.dg/template/spec35.C	2009-10-23 21:37:13.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.dg/template/spec35.C	2017-01-24 12:05:02.635304400 +0300
@@ -24,6 +24,6 @@
   // { dg-final { scan-assembler-not ".glob(a|)l\[\t \]*_?_Z2f1IiEvT_" } }
   f1(0);  // Expected to have static linkage
 
-  // { dg-final { scan-assembler ".weak(_definition)?\[\t \]*_?_Z2f2IiEvT_" { target { ! { *-*-mingw* *-*-cygwin } } } } }
+  // { dg-final { scan-assembler ".weak(_definition)?\[\t \]*_?_Z2f2IiEvT_" { target { ! { *-*-mingw* *-*-cygwin *-*-msys } } } } }
   f2(0);  // Expected to have weak global linkage
 }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/g++.old-deja/g++.ext/attrib5.C gcc-6.3.0/gcc/testsuite/g++.old-deja/g++.ext/attrib5.C
--- gcc-6.3.0-orig/gcc/testsuite/g++.old-deja/g++.ext/attrib5.C	2012-03-12 19:35:56.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/g++.old-deja/g++.ext/attrib5.C	2017-01-24 12:05:02.635304400 +0300
@@ -1,4 +1,4 @@
-// { dg-do run { xfail i?86-pc-cygwin } }
+// { dg-do run { xfail i?86-pc-cygwin i?86-pc-msys } }
 // Test that attributes weak and alias coexist.
 // { dg-require-weak "" }
 // { dg-require-alias "" }
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-1.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-1.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-1.c.orig	2018-04-15 10:51:56.116450700 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-1.c	2018-04-15 11:06:47.431289500 -0400
@@ -1,5 +1,5 @@
 /* Test for MS structure sizes.  */
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin* } } */
 /* { dg-require-effective-target ilp32 } */
 /* { dg-options "-std=gnu99" } */
 
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-2.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-2.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-2.c.orig	2018-04-15 13:12:02.314276800 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-2.c	2018-04-15 13:19:14.822616600 -0400
@@ -1,5 +1,5 @@
 /* Test for MS structure sizes.  */
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin* } } */
 /* { dg-require-effective-target ilp32 } */
 /* { dg-options "-std=gnu99" } */
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/attr-ms_struct-packed1.c gcc-6.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-packed1.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-packed1.c.orig	2018-04-15 12:13:10.648618300 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/attr-ms_struct-packed1.c	2018-04-15 12:20:57.045298900 -0400
@@ -1,5 +1,5 @@
 /* Test for MS structure with packed attribute.  */
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin* } }
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin* } }
 /* { dg-options "-std=gnu99" } */
 
 extern void abort ();
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-attrib.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-attrib.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-attrib.c.orig	2018-04-15 13:12:02.330821000 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-attrib.c	2018-04-15 13:24:13.380317700 -0400
@@ -3,7 +3,7 @@
    posted to GCC-patches
    http://gcc.gnu.org/ml/gcc-patches/2000-08/msg00577.html */ 
 
-/* { dg-do run { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 
 /* We don't want the default "pedantic-errors" in this case, since we're
    testing nonstandard stuff to begin with. */
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout.c.orig	2018-04-15 13:56:42.693307600 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout.c	2018-04-15 13:59:05.661616600 -0400
@@ -5,7 +5,7 @@
    posted to GCC-patches
    http://gcc.gnu.org/ml/gcc-patches/2000-08/msg00577.html */
 
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin* } } */
 /* { dg-options "-mms-bitfields -D_TEST_MS_LAYOUT" } */
 
 #include <stddef.h>
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-2.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-2.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-2.c.orig	2018-04-15 14:13:23.415060600 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-2.c	2018-04-15 14:17:13.165554000 -0400
@@ -5,7 +5,7 @@
    posted to GCC-patches
    http://gcc.gnu.org/ml/gcc-patches/2000-08/msg00577.html */
 
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin* } } */
 /* { dg-options "-D_TEST_MS_LAYOUT" } */
 /* This test uses the attribute instead of the command line option.  */
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/bf-ms-layout-3.c gcc-6.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-3.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-3.c.orig	2018-04-15 14:13:23.424084500 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/bf-ms-layout-3.c	2018-04-15 14:20:56.342922900 -0400
@@ -1,5 +1,5 @@
 /* Test for MS bitfield layout */
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-* x86_64-*-* } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-* x86_64-*-* } } */
 
 extern void abort();
 
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.dg/bf-no-ms-layout.c.orig gcc-7.3.0/gcc/testsuite/gcc.dg/bf-no-ms-layout.c
--- gcc-7.3.0/gcc/testsuite/gcc.dg/bf-no-ms-layout.c.orig	2018-04-15 14:30:06.814376200 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.dg/bf-no-ms-layout.c	2018-04-15 14:37:28.971071500 -0400
@@ -5,7 +5,7 @@
    posted to GCC-patches
    http://gcc.gnu.org/ml/gcc-patches/2000-08/msg00577.html */
 
-/* { dg-do run { target *-*-mingw* *-*-cygwin* i?86-*-darwin } } */
+/* { dg-do run { target *-*-mingw* *-*-cygwin* *-*-msys* i?86-*-darwin } } */
 /* { dg-options "-mno-ms-bitfields" } */
 
 #include <stddef.h>
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-3.c gcc-6.3.0/gcc/testsuite/gcc.dg/dll-3.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-3.c	2010-10-10 23:25:09.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/dll-3.c	2017-01-24 12:05:02.650904500 +0300
@@ -1,7 +1,7 @@
 /* Ensure dllexport overrides dllimport.  */
 
 /* { dg-do compile { target arm*-*-pe* } } */
-/* { dg-do compile { target i?86-pc-cygwin } } */
+/* { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } } */
 /* { dg-do compile { target i?86-*-mingw* x86_64-*-mingw*} } */
 
 __declspec (dllimport) int foo1 ();
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-4.c gcc-6.3.0/gcc/testsuite/gcc.dg/dll-4.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-4.c	2010-10-10 23:25:09.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/dll-4.c	2017-01-24 12:05:02.650904500 +0300
@@ -1,5 +1,5 @@
 /* { dg-do compile { target arm*-*-pe* } } */
-/* { dg-do compile { target i?86-pc-cygwin } } */
+/* { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } } */
 /* { dg-do compile { target i?86-*-mingw* x86_64-*-mingw* } } */
 
 __declspec (dllimport) int foo1;
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-5.c gcc-6.3.0/gcc/testsuite/gcc.dg/dll-5.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-5.c	2010-10-10 23:25:09.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/dll-5.c	2017-01-24 12:05:02.650904500 +0300
@@ -1,4 +1,4 @@
-/* { dg-do compile { target i?86-pc-cygwin } } */
+/* { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } } */
 /* { dg-do compile { target i?86-*-mingw* x86_64-*-mingw* } } */
 /* { dg-do compile { target arm*-*-pe* } } */
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-8.c gcc-6.3.0/gcc/testsuite/gcc.dg/dll-8.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/dll-8.c	2012-04-10 07:15:22.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/dll-8.c	2017-01-24 12:05:02.666504500 +0300
@@ -1,4 +1,4 @@
-/* { dg-do compile { target i?86-pc-cygwin } } */
+/* { dg-do compile { target i?86-pc-cygwin i?86-pc-msys } } */
 /* { dg-do compile { target i?86-*-mingw* x86_64-*-mingw*} } */
 /* { dg-options "-O3 -fwhole-program" } */
 /* { dg-final { scan-assembler "foo1" } } */
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/graphite/run-id-1.c gcc-6.3.0/gcc/testsuite/gcc.dg/graphite/run-id-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/graphite/run-id-1.c	2011-10-27 02:14:43.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/graphite/run-id-1.c	2017-01-24 12:05:02.666504500 +0300
@@ -1,4 +1,4 @@
-/* { dg-options "-Wl,--stack,12582912" { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-options "-Wl,--stack,12582912" { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 /* { dg-require-effective-target size32plus } */
 
 void abort (void);
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/lto/20090914-2_0.c gcc-6.3.0/gcc/testsuite/gcc.dg/lto/20090914-2_0.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/lto/20090914-2_0.c	2013-03-06 22:29:46.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/lto/20090914-2_0.c	2017-01-24 12:05:02.666504500 +0300
@@ -1,7 +1,7 @@
 /* { dg-lto-do run } */
 /* { dg-skip-if "x86 only" { ! { x86_64-*-* i?86-*-* } } { "*" } { "" } } */
 /* { dg-skip-if "no .type" { *-*-darwin* } { "*" } { "" } } */
-/* { dg-skip-if "no @function" { *-*-mingw* *-*-cygwin* } { "*" } { "" } } */
+/* { dg-skip-if "no @function" { *-*-mingw* *-*-cygwin* *-*-msys* } { "*" } { "" } } */
 
 /* Doesn't work without this dummy function with -fwhopr.  */
 int foo(void) { }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.dg/tree-ssa/loop-1.c gcc-6.3.0/gcc/testsuite/gcc.dg/tree-ssa/loop-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.dg/tree-ssa/loop-1.c	2015-11-05 11:43:46.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.dg/tree-ssa/loop-1.c	2017-01-24 12:05:02.666504500 +0300
@@ -46,10 +46,10 @@
 /* CRIS keeps the address in a register.  */
 /* m68k sometimes puts the address in a register, depending on CPU and PIC.  */
 
-/* { dg-final { scan-assembler-times "foo" 5 { xfail hppa*-*-* ia64*-*-* sh*-*-* cris-*-* crisv32-*-* fido-*-* m68k-*-* i?86-*-mingw* i?86-*-cygwin* x86_64-*-mingw* visium-*-* } } } */
+/* { dg-final { scan-assembler-times "foo" 5 { xfail hppa*-*-* ia64*-*-* sh*-*-* cris-*-* crisv32-*-* fido-*-* m68k-*-* i?86-*-mingw* i?86-*-cygwin* i?86-*-msys* x86_64-*-mingw* visium-*-* } } } */
 /* { dg-final { scan-assembler-times "foo,%r" 5 { target hppa*-*-* } } } */
 /* { dg-final { scan-assembler-times "= foo"  5 { target ia64*-*-* } } } */
-/* { dg-final { scan-assembler-times "call\[ \t\]*_foo" 5 { target i?86-*-mingw* i?86-*-cygwin* } } } */
+/* { dg-final { scan-assembler-times "call\[ \t\]*_foo" 5 { target i?86-*-mingw* i?86-*-cygwin* i?86-*-msys* } } } */
 /* { dg-final { scan-assembler-times "call\[ \t\]*foo" 5 { target x86_64-*-mingw* } } } */
 /* { dg-final { scan-assembler-times "jsr|bsrf|blink\ttr?,r18"  5 { target sh*-*-* } } } */
 /* { dg-final { scan-assembler-times "Jsr \\\$r" 5 { target cris-*-* } } } */
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/bitfield1.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/bitfield1.c
--- gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield1.c.orig	2018-04-15 13:36:04.768005800 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield1.c	2018-04-15 13:43:42.537956400 -0400
@@ -2,7 +2,7 @@
 // { dg-do run }
 // { dg-require-effective-target ia32 }
 // { dg-options "-O2" }
-// { dg-options "-mno-align-double -mno-ms-bitfields" { target i?86-*-cygwin* i?86-*-mingw*} }
+// { dg-options "-mno-align-double -mno-ms-bitfields" { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw*} }
 
 extern void abort (void);
 extern void exit (int);
diff -aurp gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield2.c.orig gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield2.c
--- gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield2.c.orig	2018-04-15 13:36:04.768005800 -0400
+++ gcc-7.3.0/gcc/testsuite/gcc.target/i386/bitfield2.c	2018-04-15 13:46:55.407633700 -0400
@@ -2,7 +2,7 @@
 // { dg-do run }
 // { dg-require-effective-target ia32 }
 // { dg-options "-O2" }
-// { dg-options "-mno-align-double -mno-ms-bitfields" { target i?86-*-cygwin* i?86-*-mingw* } }
+// { dg-options "-mno-align-double -mno-ms-bitfields" { target i?86-*-cygwin* i?86-*-msys* i?86-*-mingw* } }
 
 extern void abort (void);
 extern void exit (int);
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/fastcall-1.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/fastcall-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/fastcall-1.c	2008-01-26 12:31:30.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/fastcall-1.c	2017-01-24 12:05:02.666504500 +0300
@@ -1,4 +1,4 @@
-/* { dg-do compile { target i?86-*-mingw32* i?86-*-cygwin* } } */
+/* { dg-do compile { target i?86-*-mingw32* i?86-*-cygwin* i?86-*-msys* } } */
 /* { dg-options "-std=gnu89" } */
 
 void
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pad-4.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pad-4.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pad-4.c	2014-11-12 21:32:57.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pad-4.c	2017-01-24 12:05:02.666504500 +0300
@@ -2,7 +2,7 @@
 /* { dg-require-effective-target ia32 } */
 /* { dg-require-effective-target fpic } */
 /* { dg-skip-if "" { *-*-* } { "-march=*" } { "-march=atom" } } */
-/* { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin } { "*" } { "" } } */
+/* { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin *-*-msys } { "*" } { "" } } */
 /* { dg-options "-O2 -fomit-frame-pointer -march=atom -fPIC" } */
 /* { dg-final { scan-assembler-times "nop" 8 } } */
 /* { dg-final { scan-assembler-not "rep" } } */
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pic-1.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pic-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pic-1.c	2014-10-13 21:26:49.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pic-1.c	2017-01-24 12:05:02.682104500 +0300
@@ -2,7 +2,7 @@
 /* { dg-do compile } */
 /* { dg-require-effective-target ia32 } */
 /* { dg-require-effective-target fpic } */
-/* { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin } { "*" } { "" } } */
+/* { dg-skip-if "No Windows PIC" { *-*-mingw* *-*-cygwin *-*-msys } { "*" } { "" } } */
 /* { dg-options "-fPIC" } */
 
 /* Test verifies that %ebx is no longer fixed when generating PIC code on i686.  */
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr25993.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr25993.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr25993.c	2017-01-24 12:00:21.857351300 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr25993.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,5 +1,5 @@
 /* { dg-do assemble } */
-/* { dg-skip-if "" { "*-*-darwin*" "*-*-mingw*" "*-*-cygwin*" } { "*" } { "" } } */
+/* { dg-skip-if "" { "*-*-darwin*" "*-*-mingw*" "*-*-cygwin*" "*-*-msys*" } { "*" } { "" } } */
 /* { dg-options "-std=c99 -x assembler-with-cpp" } */
 
 #ifndef __ASSEMBLER__
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr40906-1.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr40906-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr40906-1.c	2011-10-20 17:04:34.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr40906-1.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,7 +1,7 @@
 /* { dg-do run } */
 /* { dg-require-effective-target ia32 } */
 /* { dg-options "-O2 -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args -mno-accumulate-outgoing-args" } */
-/* { dg-options "-O2 -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args" { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-options "-O2 -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args" { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 
 void abort (void);
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr40906-2.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr40906-2.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr40906-2.c	2011-10-20 17:04:34.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr40906-2.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,7 +1,7 @@
 /* { dg-do run } */
 /* { dg-require-effective-target ia32 } */
 /* { dg-options "-O2 -Wno-psabi -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args -mno-accumulate-outgoing-args -m128bit-long-double" } */
-/* { dg-options "-O2 -Wno-psabi -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args -m128bit-long-double" { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-options "-O2 -Wno-psabi -fomit-frame-pointer -fno-asynchronous-unwind-tables -mpush-args -m128bit-long-double" { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 
 void abort (void);
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr46226.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr46226.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr46226.c	2011-10-20 17:04:34.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr46226.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,6 +1,6 @@
 /* { dg-do run } */
 /* { dg-options "-Os -fomit-frame-pointer -mno-accumulate-outgoing-args -fno-asynchronous-unwind-tables" } */
-/* { dg-options "-Os -fomit-frame-pointer -fno-asynchronous-unwind-tables" { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-options "-Os -fomit-frame-pointer -fno-asynchronous-unwind-tables" { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 
 extern void abort(void);
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr56564-1.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr56564-1.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr56564-1.c	2015-05-29 11:20:29.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr56564-1.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,6 +1,6 @@
 /* PR target/56564 */
 /* { dg-do compile { target { fpic && lp64 } } } */
-/* { dg-skip-if "No symbol interposition for PIC" { *-*-mingw* *-*-cygwin* *-*-darwin* } } */
+/* { dg-skip-if "No symbol interposition for PIC" { *-*-mingw* *-*-cygwin* *-*-msys* *-*-darwin* } } */
 /* { dg-options "-O3 -fpic -fdump-tree-optimized" } */
 
 struct S { long a, b; } s = { 5, 6 };
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr56564-3.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr56564-3.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/pr56564-3.c	2015-05-29 11:20:29.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/pr56564-3.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,6 +1,6 @@
 /* PR target/56564 */
 /* { dg-do compile { target { fpic && lp64 } } } */
-/* { dg-skip-if "No symbol interposition for PIC" { *-*-mingw* *-*-cygwin* *-*-darwin* } } */
+/* { dg-skip-if "No symbol interposition for PIC" { *-*-mingw* *-*-cygwin* *-*-msys* *-*-darwin* } } */
 /* { dg-options "-O3 -fpic -fdump-tree-optimized" } */
 
 __thread struct S { long a, b; } s = { 5, 6 };
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/sse-10.c gcc-6.3.0/gcc/testsuite/gcc.target/i386/sse-10.c
--- gcc-6.3.0-orig/gcc/testsuite/gcc.target/i386/sse-10.c	2010-05-19 20:10:05.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gcc.target/i386/sse-10.c	2017-01-24 12:05:02.682104500 +0300
@@ -1,7 +1,7 @@
 /* PR 17930 */
 /* { dg-do run } */
 /* { dg-options "-O1 -msse2 -mfpmath=sse -mno-accumulate-outgoing-args -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer" } */
-/* { dg-options "-O1 -msse2 -mfpmath=sse -fno-omit-frame-pointer" { target *-*-mingw* *-*-cygwin* } } */
+/* { dg-options "-O1 -msse2 -mfpmath=sse -fno-omit-frame-pointer" { target *-*-mingw* *-*-cygwin* *-*-msys* } } */
 /* { dg-require-effective-target sse2 } */
 
 #include "sse2-check.h"
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_1.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_1.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_1.f90	2015-10-26 13:37:22.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_1.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* spu-*-* } } } }
+! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* *-*-msys* spu-*-* } } } }
 ! { dg-options "-std=gnu" }
 ! See PR38956.  Test fails on cygwin when user has Administrator rights
   implicit none
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_2.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_2.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_2.f90	2015-10-26 13:37:22.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_2.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* spu-*-* } } } }
+! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* *-*-msys* spu-*-* } } } }
 ! { dg-options "-std=gnu" }
 ! See PR38956.  Test fails on cygwin when user has Administrator rights
   implicit none
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_3.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_3.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/chmod_3.f90	2015-10-26 13:37:22.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/chmod_3.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* spu-*-* } } } }
+! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* *-*-msys* spu-*-* } } } }
 ! { dg-options "-std=gnu -fdefault-integer-8" }
 ! See PR38956.  Test fails on cygwin when user has Administrator rights
   implicit none
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/default_format_denormal_1.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/default_format_denormal_1.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/default_format_denormal_1.f90	2012-11-02 04:23:19.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/default_format_denormal_1.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { xfail *-*-darwin[89]* *-*-cygwin* spu-*-* powerpc-ibm-aix* } }
+! { dg-do run { xfail *-*-darwin[89]* *-*-cygwin* *-*-msys* spu-*-* powerpc-ibm-aix* } }
 ! Test XFAILed on these platforms because the system's printf() lacks
 ! proper support for denormals.
 !
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/open_errors.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/open_errors.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/open_errors.f90	2015-03-12 00:34:22.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/open_errors.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* spu-*-* } } } }
+! { dg-do run { target { ! { *-*-mingw* *-*-cygwin* *-*-msys* spu-*-* } } } }
 ! PR30005 Enhanced error messages for OPEN
 ! Submitted by Jerry DeLisle  <jvdelisle@gcc.gnu.org>
 ! See PR38956.  Test fails on cygwin when user has Administrator rights
diff -Naur gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/winapi.f90 gcc-6.3.0/gcc/testsuite/gfortran.dg/winapi.f90
--- gcc-6.3.0-orig/gcc/testsuite/gfortran.dg/winapi.f90	2009-08-14 06:35:32.000000000 +0400
+++ gcc-6.3.0/gcc/testsuite/gfortran.dg/winapi.f90	2017-01-24 12:05:02.697704500 +0300
@@ -1,4 +1,4 @@
-! { dg-do run { target *-*-cygwin* *-*-mingw* } }
+! { dg-do run { target *-*-cygwin* *-*-msys* *-*-mingw* } }
 ! { dg-options "-lkernel32" }
 ! Test case provided by Dennis Wassel.
 
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/g++.exp gcc-6.3.0/gcc/testsuite/lib/g++.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/g++.exp	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/g++.exp	2017-01-24 12:05:02.697704500 +0300
@@ -205,7 +205,7 @@
 
     # Many hosts now default to a non-ASCII C locale, however, so
     # they can set a charset encoding here if they need.
-    if { [ishost "*-*-cygwin*"] } {
+    if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
       setenv LC_ALL C.ASCII
       setenv LANG C.ASCII
     }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/gcc-dg.exp gcc-6.3.0/gcc/testsuite/lib/gcc-dg.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/gcc-dg.exp	2016-10-05 03:17:40.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/gcc-dg.exp	2017-01-24 12:05:02.713304600 +0300
@@ -37,7 +37,7 @@
 
 # Many hosts now default to a non-ASCII C locale, however, so
 # they can set a charset encoding here if they need.
-if { [ishost "*-*-cygwin*"] } {
+if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
   setenv LC_ALL C.ASCII
   setenv LANG C.ASCII
 }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/gfortran.exp gcc-6.3.0/gcc/testsuite/lib/gfortran.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/gfortran.exp	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/gfortran.exp	2017-01-24 12:05:02.713304600 +0300
@@ -161,7 +161,7 @@
 
     # Many hosts now default to a non-ASCII C locale, however, so
     # they can set a charset encoding here if they need.
-    if { [ishost "*-*-cygwin*"] } {
+    if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
       setenv LC_ALL C.ASCII
       setenv LANG C.ASCII
     }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/objc.exp gcc-6.3.0/gcc/testsuite/lib/objc.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/objc.exp	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/objc.exp	2017-01-24 12:05:02.713304600 +0300
@@ -105,7 +105,7 @@
 
     # Many hosts now default to a non-ASCII C locale, however, so
     # they can set a charset encoding here if they need.
-    if { [ishost "*-*-cygwin*"] } {
+    if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
       setenv LC_ALL C.ASCII
       setenv LANG C.ASCII
     }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/options.exp gcc-6.3.0/gcc/testsuite/lib/options.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/options.exp	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/options.exp	2017-01-24 12:05:02.713304600 +0300
@@ -20,7 +20,7 @@
 
 # Many hosts now default to a non-ASCII C locale, however, so
 # they can set a charset encoding here if they need.
-if { [ishost "*-*-cygwin*"] } {
+if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
   setenv LC_ALL C.ASCII
   setenv LANG C.ASCII
 }
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/target-libpath.exp gcc-6.3.0/gcc/testsuite/lib/target-libpath.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/target-libpath.exp	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/target-libpath.exp	2017-01-24 12:05:02.728904600 +0300
@@ -256,7 +256,7 @@
 
     if { [istarget *-*-darwin*] } {
 	set shlib_ext "dylib"
-    } elseif { [istarget *-*-cygwin*] || [istarget *-*-mingw*] } {
+    } elseif { [istarget *-*-cygwin*] || [istarget *-*-msys*] || [istarget *-*-mingw*] } {
 	set shlib_ext "dll"
     } elseif { [istarget hppa*-*-hpux*] } {
 	set shlib_ext "sl"
diff -Naur gcc-6.3.0-orig/gcc/testsuite/lib/target-supports.exp gcc-6.3.0/gcc/testsuite/lib/target-supports.exp
--- gcc-6.3.0-orig/gcc/testsuite/lib/target-supports.exp	2016-12-07 18:55:26.000000000 +0300
+++ gcc-6.3.0/gcc/testsuite/lib/target-supports.exp	2017-01-24 12:05:02.728904600 +0300
@@ -282,7 +282,7 @@
 
     # Windows targets Cygwin and MingW32 support it
 
-    if { [istarget *-*-cygwin*] || [istarget *-*-mingw*] } {
+    if { [istarget *-*-cygwin*] || [istarget *-*-msys*] || [istarget *-*-mingw*] } {
 	return 1
     }
 
@@ -548,6 +548,11 @@
 	return 0
     }
 
+    # MSYS does not support -p.
+    if { [istarget *-*-msys*] && $test_what == "-p" } {
+	return 0
+    }
+    
     # uClibc does not have gcrt1.o.
     if { [check_effective_target_uclibc]
 	 && ($test_what == "-p" || $test_what == "-pg") } {
@@ -949,7 +954,7 @@
 # for trivial code, 0 otherwise.
 
 proc check_effective_target_pe_aligned_commons {} {
-    if { [istarget *-*-cygwin*] || [istarget *-*-mingw*] } {
+    if { [istarget *-*-cygwin*] || [istarget *-*-msys*] || [istarget *-*-mingw*] } {
 	return [check_no_compiler_messages pe_aligned_commons object {
 	    int foo;
 	} "-mpe-aligned-commons"]
@@ -2036,7 +2041,7 @@
 # Returns true iff "mkfifo" is available on the target system.
 
 proc check_mkfifo_available {} {
-    if { [istarget *-*-cygwin*] } {
+    if { [istarget *-*-cygwin*] || [istarget *-*-msys*] } {
        # Cygwin has mkfifo, but support is incomplete.
        return 0
      }
@@ -6242,7 +6247,7 @@
 proc check_effective_target_automatic_stack_alignment  { } {
     # Ordinarily x86 supports automatic stack alignment ...
     if { [istarget i?86*-*-*] || [istarget x86_64-*-*] } then {
-        if { [istarget *-*-mingw*] || [istarget *-*-cygwin*] } {
+        if { [istarget *-*-mingw*] || [istarget *-*-cygwin*] || [istarget *-*-msys*] } {
 	    # ... except Win64 SEH doesn't.  Succeed for Win32 though.
 	    return [check_effective_target_ilp32];
 	}
diff -Naur gcc-6.3.0-orig/libffi/testsuite/lib/target-libpath.exp gcc-6.3.0/libffi/testsuite/lib/target-libpath.exp
--- gcc-6.3.0-orig/libffi/testsuite/lib/target-libpath.exp	2015-01-12 19:19:59.000000000 +0300
+++ gcc-6.3.0/libffi/testsuite/lib/target-libpath.exp	2017-01-24 12:05:02.728904600 +0300
@@ -175,7 +175,7 @@
   } else {
     setenv DYLD_LIBRARY_PATH "$ld_library_path"
   }
-  if { [istarget *-*-cygwin*] || [istarget *-*-mingw*] } {
+  if { [istarget *-*-cygwin*] || [istarget *-*-msys*] || [istarget *-*-mingw*] } {
     if { $orig_path_saved } {
       setenv PATH "$ld_library_path:$orig_path"
     } else {
@@ -271,7 +271,7 @@
 
     if { [ istarget *-*-darwin* ] } {
 	set shlib_ext "dylib"
-    } elseif { [ istarget *-*-cygwin* ] || [ istarget *-*-mingw* ] } {
+    } elseif { [ istarget *-*-cygwin* ] || [ istarget *-*-msys* ] || [ istarget *-*-mingw* ] } {
 	set shlib_ext "dll"
     } elseif { [ istarget hppa*-*-hpux* ] } {
 	set shlib_ext "sl"
diff -Naur gcc-6.3.0-orig/libgomp/testsuite/lib/libgomp.exp gcc-6.3.0/libgomp/testsuite/lib/libgomp.exp
--- gcc-6.3.0-orig/libgomp/testsuite/lib/libgomp.exp	2016-03-13 22:08:21.000000000 +0300
+++ gcc-6.3.0/libgomp/testsuite/lib/libgomp.exp	2017-01-24 12:05:02.744504600 +0300
@@ -99,7 +99,7 @@
 
     # Many hosts now default to a non-ASCII C locale, however, so
     # they can set a charset encoding here if they need.
-    if { [ishost "*-*-cygwin*"] } {
+    if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
       setenv LC_ALL C.ASCII
       setenv LANG C.ASCII
     }
diff -Naur gcc-6.3.0-orig/libstdc++-v3/testsuite/18_support/pthread_guard.cc gcc-6.3.0/libstdc++-v3/testsuite/18_support/pthread_guard.cc
--- gcc-6.3.0-orig/libstdc++-v3/testsuite/18_support/pthread_guard.cc	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/libstdc++-v3/testsuite/18_support/pthread_guard.cc	2017-01-24 12:05:02.791304700 +0300
@@ -16,7 +16,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-darwin* } }
 
 #include <cstdlib>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/atomic/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/atomic/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/atomic/3.cc.orig	2018-04-15 15:05:06.474625500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/atomic/3.cc	2018-04-15 15:11:51.825689700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* powerpc-ibm-aix* *-*-solaris* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -Naur gcc-6.3.0-orig/libstdc++-v3/testsuite/20_util/shared_ptr/thread/default_weaktoshared.cc gcc-6.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/default_weaktoshared.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/default_weaktoshared.cc.orig	2018-04-15 15:05:06.484150100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/default_weaktoshared.cc	2018-04-15 15:19:17.486622200 -0400
@@ -17,7 +17,7 @@
 
 // 20.6.6.2 Template class shared_ptr [util.smartptr.shared]
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 // { dg-require-effective-target c++11 }
 
diff -Naur gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/mutex_weaktoshared.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/mutex_weaktoshared.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/mutex_weaktoshared.cc.orig	2018-04-15 15:48:28.660996800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/20_util/shared_ptr/thread/mutex_weaktoshared.cc	2018-04-15 15:59:01.384781700 -0400
@@ -17,7 +17,7 @@
 
 // 20.6.6.2 Template class shared_ptr [util.smartptr.shared]
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 // { dg-require-effective-target c++11 }
 
diff -Naur gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread18185.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread18185.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread18185.cc.orig	2018-04-15 15:48:28.670522200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread18185.cc	2018-04-15 16:04:21.394394800 -0400
@@ -16,7 +16,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <ext/new_allocator.h>
diff -Naur gcc-6.3.0-orig/libstdc++-v3/testsuite/21_strings/basic_string/pthread33394.cc gcc-6.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread33394.cc
--- gcc-6.3.0-orig/libstdc++-v3/testsuite/21_strings/basic_string/pthread33394.cc	2016-01-04 17:30:50.000000000 +0300
+++ gcc-6.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread33394.cc	2017-01-24 12:05:02.822504800 +0300
@@ -15,7 +15,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 // { dg-additional-options "-DITERATIONS=1000" { target simulator } }
diff -Naur gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread4.cc gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread4.cc.orig	2018-04-15 15:48:28.687066100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/21_strings/basic_string/pthread4.cc	2018-04-15 16:08:50.040991300 -0400
@@ -19,7 +19,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <string>
diff -Naur gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-1.cc.orig	2018-04-15 15:48:28.698597200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-1.cc	2018-04-15 16:13:05.189016900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 // { dg-require-namedlocale "en_US.ISO8859-1" }
 // { dg-require-namedlocale "fr_FR.ISO8859-15" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-2.cc.orig	2018-04-15 15:48:28.707119400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/22_locale/locale/cons/12658_thread-2.cc	2018-04-15 16:17:10.614386600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 // { dg-require-namedlocale "en_US.ISO8859-1" }
 // { dg-require-namedlocale "fr_FR.ISO8859-15" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread1.cc.orig	2018-04-15 15:48:28.717146400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread1.cc	2018-04-15 16:20:29.096375200 -0400
@@ -17,7 +17,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 // This multi-threading C++/STL/POSIX code adheres to rules outlined here:
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread5.cc.orig	2018-04-15 15:48:28.728173400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/23_containers/list/pthread5.cc	2018-04-15 16:26:07.516046200 -0400
@@ -19,7 +19,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <vector>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/23_containers/map/pthread6.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/23_containers/map/pthread6.cc
--- ./gcc-7.3.0/libstdc++-v3/testsuite/23_containers/map/pthread6.cc.orig	2018-04-15 16:40:45.752698500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/23_containers/map/pthread6.cc	2018-04-15 16:43:31.155363800 -0400
@@ -18,7 +18,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <string>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/23_containers/vector/debug/multithreaded_swap.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/23_containers/vector/debug/multithreaded_swap.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/23_containers/vector/debug/multithreaded_swap.cc.orig	2018-04-15 17:15:41.260364400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/23_containers/vector/debug/multithreaded_swap.cc	2018-04-15 17:33:13.775451200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ofstream/pthread2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ofstream/pthread2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ofstream/pthread2.cc.orig	2018-04-15 17:48:29.630450000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ofstream/pthread2.cc	2018-04-15 17:55:05.279501500 -0400
@@ -18,7 +18,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <fstream>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ostringstream/pthread3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ostringstream/pthread3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ostringstream/pthread3.cc.orig	2018-04-15 17:48:29.640478100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/27_io/basic_ostringstream/pthread3.cc	2018-04-15 17:56:37.346641500 -0400
@@ -18,7 +18,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <sstream>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/42819.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/42819.c
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/42819.cc.orig	2018-04-15 20:32:17.195524500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/42819.cc	2018-04-15 20:38:33.047767600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/49668.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/49668.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/49668.cc.orig	2018-04-15 21:15:45.119695900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/49668.cc	2018-04-15 21:20:31.606075400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/54297.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/54297.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/54297.cc.orig	2018-04-15 20:32:17.211566000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/54297.cc	2018-04-15 20:44:21.111425400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/async.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/async.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/async.cc.orig	2018-04-15 20:32:17.229113600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/async.cc	2018-04-15 20:47:58.526799400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/launch.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/launch.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/launch.cc.orig	2018-04-15 20:32:17.237134100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/launch.cc	2018-04-15 20:52:12.370863300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/sync.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/sync.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/sync.cc.orig	2018-04-15 20:32:17.246659600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/async/sync.cc	2018-04-15 21:05:46.192944000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/39909.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/39909.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/39909.cc.orig	2018-04-16 03:26:35.634922900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/39909.cc	2018-04-16 03:56:47.528517700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/49668.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/49668.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/49668.cc.orig	2018-04-16 03:26:35.646955800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/49668.cc	2018-04-16 04:08:15.765723200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/60497.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/60497.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/60497.cc.orig	2018-04-16 03:26:35.655978600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/60497.cc	2018-04-16 04:16:45.797924000 -0400
@@ -1,4 +1,4 @@
-// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/call_once1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/call_once1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/call_once1.cc.orig	2018-04-16 03:26:35.668011200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/call_once/call_once1.cc	2018-04-16 04:26:45.152924400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/54185.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/54185.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/54185.cc.orig	2018-04-16 03:26:35.681048400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/54185.cc	2018-04-16 05:00:48.817345000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin1[1-9]* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin1[1-9]* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/cons/1.cc.orig	2018-04-16 03:26:35.695592000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/cons/1.cc	2018-04-16 05:08:43.378566100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/1.cc.orig	2018-04-16 03:26:35.705649100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/1.cc	2018-04-16 05:16:34.494214600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/2.cc.orig	2018-04-16 03:26:35.717680300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/2.cc	2018-04-16 05:18:57.574857400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/3.cc.orig	2018-04-16 03:26:35.728711300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/3.cc	2018-04-16 05:22:45.355804300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/53841.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/53841.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/53841.cc.orig	2018-04-16 03:26:35.738736000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/members/53841.cc	2018-04-16 05:30:36.296203300 -0400
@@ -1,4 +1,4 @@
-// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* hppa*-hp-hpux11* } }
+// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* hppa*-hp-hpux11* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* hppa*-hp-hpux11* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/native_handle/typesizes.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/native_handle/typesizes.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/native_handle/typesizes.cc.orig	2018-04-16 05:42:58.214459400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable/native_handle/typesizes.cc	2018-04-16 05:48:02.852404200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/50862.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/50862.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/50862.cc.orig	2018-04-16 05:42:58.224486000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/50862.cc	2018-04-16 06:01:59.335496700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/cons/1.cc.orig	2018-04-16 05:42:58.243036300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/cons/1.cc	2018-04-16 06:06:27.301302500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/1.cc.orig	2018-04-16 10:06:08.651201700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/1.cc	2018-04-16 11:08:51.606782600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/2.cc.orig	2018-04-16 10:06:08.659724200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/condition_variable_any/members/2.cc	2018-04-16 11:08:51.662931900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/cons/move.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/cons/move.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/cons/move.cc.orig	2018-04-16 10:06:08.670252300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/cons/move.cc	2018-04-16 11:08:51.736627700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/45133.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/45133.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/45133.cc.orig	2018-04-16 10:06:08.679777200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/45133.cc	2018-04-16 11:08:51.797289100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get.cc.orig	2018-04-16 10:06:08.688801500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get.cc	2018-04-16 11:08:51.868980500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get2.cc.orig	2018-04-16 10:06:08.698828200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/get2.cc	2018-04-16 11:08:51.920617900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/share.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/share.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/share.cc.orig	2018-04-16 10:06:08.707351000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/share.cc	2018-04-16 11:08:51.981780200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/valid.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/valid.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/valid.cc.orig	2018-04-16 10:06:08.716375000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/valid.cc	2018-04-16 11:08:52.043443800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait.cc.orig	2018-04-16 10:06:08.726401900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait.cc	2018-04-16 11:08:52.104606400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_for.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_for.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_for.cc.orig	2018-04-16 10:06:08.735927400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_for.cc	2018-04-16 11:08:52.166803000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_until.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_until.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_until.cc.orig	2018-04-16 10:06:08.744449900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/future/members/wait_until.cc	2018-04-16 11:08:52.227464700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/1.cc.orig	2018-04-16 10:06:08.753975400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/1.cc	2018-04-16 11:08:52.288626200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/2.cc.orig	2018-04-16 10:06:08.766007900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/2.cc	2018-04-16 11:08:52.354302400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/3.cc.orig	2018-04-16 10:06:08.774529600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/3.cc	2018-04-16 11:08:52.417469200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/4.cc.orig	2018-04-16 10:06:08.783553600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/lock/4.cc	2018-04-16 11:08:52.479133400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/cons/1.cc.orig	2018-04-16 10:06:08.792577600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/cons/1.cc	2018-04-16 11:08:52.549822300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/dest/destructor_locked.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/dest/destructor_locked.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/dest/destructor_locked.cc.orig	2018-04-16 10:06:08.801601600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/dest/destructor_locked.cc	2018-04-16 11:08:52.601458300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/lock/1.cc.orig	2018-04-16 10:06:08.810625600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/lock/1.cc	2018-04-16 11:08:52.656604700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/1.cc.orig	2018-04-16 10:06:08.819148100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/1.cc	2018-04-16 11:08:52.726880900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/typesizes.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/typesizes.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/typesizes.cc.orig	2018-04-16 10:06:08.828172100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/native_handle/typesizes.cc	2018-04-16 11:08:52.791553000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/1.cc.orig	2018-04-16 10:06:08.837196100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/1.cc	2018-04-16 11:08:52.853718300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/2.cc.orig	2018-04-16 10:06:08.845719200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/try_lock/2.cc	2018-04-16 11:08:52.914429800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/unlock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/unlock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/unlock/1.cc.orig	2018-04-16 10:06:08.854742600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/mutex/unlock/1.cc	2018-04-16 11:08:52.976593100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/49668.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/49668.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/49668.cc.orig	2018-04-16 10:06:08.863266500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/49668.cc	2018-04-16 11:08:53.047784400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/60564.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/60564.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/60564.cc.orig	2018-04-16 10:06:08.871788200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/60564.cc	2018-04-16 11:08:53.107942400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/1.cc.orig	2018-04-16 10:06:08.881815100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/1.cc	2018-04-16 11:08:53.178443000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/2.cc.orig	2018-04-16 10:06:08.890838900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/2.cc	2018-04-16 11:08:53.243639400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/3.cc.orig	2018-04-16 10:06:08.899862900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/3.cc	2018-04-16 11:08:53.314829200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/56492.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/56492.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/56492.cc.orig	2018-04-16 10:06:08.908385700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/56492.cc	2018-04-16 11:08:53.375991300 -0400
@@ -1,4 +1,4 @@
-// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do compile { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/alloc.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/alloc.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/alloc.cc.orig	2018-04-16 10:06:08.917910800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/alloc.cc	2018-04-16 11:08:53.435661700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move.cc.orig	2018-04-16 10:06:08.927436000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move.cc	2018-04-16 11:08:53.486323200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move_assign.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move_assign.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move_assign.cc.orig	2018-04-16 10:06:08.936460000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/cons/move_assign.cc	2018-04-16 11:08:53.538965400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/at_thread_exit.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/at_thread_exit.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/at_thread_exit.cc.orig	2018-04-16 10:06:08.944983100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/at_thread_exit.cc	2018-04-16 11:08:53.602663800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future.cc.orig	2018-04-16 10:06:08.954006800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future.cc	2018-04-16 11:08:53.672877500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future2.cc.orig	2018-04-16 10:06:08.962529600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/get_future2.cc	2018-04-16 11:08:53.742100100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke.cc.orig	2018-04-16 10:06:08.971553600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke.cc	2018-04-16 11:08:53.803762200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke2.cc.orig	2018-04-16 10:06:08.980577600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke2.cc	2018-04-16 11:08:53.867431400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke3.cc.orig	2018-04-16 10:06:08.989100100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke3.cc	2018-04-16 11:08:53.918567300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke4.cc.orig	2018-04-16 10:06:08.998625300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke4.cc	2018-04-16 11:08:53.984518000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke5.cc.orig	2018-04-16 10:06:09.008653100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/invoke5.cc	2018-04-16 11:08:54.054978600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset.cc.orig	2018-04-16 10:06:09.017174500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset.cc	2018-04-16 11:08:54.118144800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset2.cc.orig	2018-04-16 10:06:09.026198500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/reset2.cc	2018-04-16 11:08:54.187842800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/swap.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/swap.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/swap.cc.orig	2018-04-16 10:06:09.035222800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/swap.cc	2018-04-16 11:08:54.238977300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/valid.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/valid.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/valid.cc.orig	2018-04-16 10:06:09.044748000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/packaged_task/members/valid.cc	2018-04-16 11:08:54.304179100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/60966.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/60966.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/60966.cc.orig	2018-04-16 10:06:09.055276100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/60966.cc	2018-04-16 11:08:54.364853600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/1.cc.orig	2018-04-16 10:06:09.063799500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/1.cc	2018-04-16 11:08:54.429550200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/alloc.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/alloc.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/alloc.cc.orig	2018-04-16 10:06:09.071819900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/alloc.cc	2018-04-16 11:08:54.500319000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move.cc.orig	2018-04-16 10:06:09.081847500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move.cc	2018-04-16 11:08:54.574015700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move_assign.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move_assign.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move_assign.cc.orig	2018-04-16 10:06:09.090369400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/cons/move_assign.cc	2018-04-16 11:08:54.639239400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/at_thread_exit.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/at_thread_exit.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/at_thread_exit.cc.orig	2018-04-16 10:06:09.099393400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/at_thread_exit.cc	2018-04-16 11:08:54.693388700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future.cc.orig	2018-04-16 10:06:09.111426300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future.cc	2018-04-16 11:08:54.748533400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future2.cc.orig	2018-04-16 10:06:09.122455600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/get_future2.cc	2018-04-16 11:08:54.798668100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception.cc.orig	2018-04-16 10:06:09.131980200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception.cc	2018-04-16 11:08:54.858826600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception2.cc.orig	2018-04-16 10:06:09.142011100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_exception2.cc	2018-04-16 11:08:54.930518600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value.cc.orig	2018-04-16 10:06:09.152033500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value.cc	2018-04-16 11:08:54.995189200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value2.cc.orig	2018-04-16 10:06:09.162059600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value2.cc	2018-04-16 11:08:55.055350600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value3.cc.orig	2018-04-16 10:06:09.171083900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/set_value3.cc	2018-04-16 11:08:55.108492200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/swap.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/swap.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/swap.cc.orig	2018-04-16 10:06:09.180108700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/promise/members/swap.cc	2018-04-16 11:08:55.169152800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/cons/1.cc.orig	2018-04-16 10:06:09.189131900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/cons/1.cc	2018-04-16 11:08:55.230340200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/dest/destructor_locked.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/dest/destructor_locked.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/dest/destructor_locked.cc.orig	2018-04-16 10:06:09.198155900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/dest/destructor_locked.cc	2018-04-16 11:08:55.301028300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/lock/1.cc.orig	2018-04-16 10:06:09.207179900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/lock/1.cc	2018-04-16 11:08:55.374722700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/1.cc.orig	2018-04-16 10:06:09.216705300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/1.cc	2018-04-16 11:08:55.428367400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-*-*-*-*-*-cygwin *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/typesizes.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/typesizes.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/typesizes.cc.orig	2018-04-16 10:06:09.225729600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/native_handle/typesizes.cc	2018-04-16 11:08:55.498063400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/1.cc.orig	2018-04-16 10:06:09.235756300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/1.cc	2018-04-16 11:08:55.556218000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/2.cc.orig	2018-04-16 10:06:09.243777300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/try_lock/2.cc	2018-04-16 11:08:55.624399000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/unlock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/unlock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/unlock/1.cc.orig	2018-04-16 10:06:09.252801900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_mutex/unlock/1.cc	2018-04-16 11:08:55.704612300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/cons/1.cc.orig	2018-04-16 10:06:09.262326500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/cons/1.cc	2018-04-16 11:08:55.764283300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/dest/destructor_locked.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/dest/destructor_locked.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/dest/destructor_locked.cc.orig	2018-04-16 10:06:09.270849600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/dest/destructor_locked.cc	2018-04-16 11:08:55.845021400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/1.cc.orig	2018-04-16 10:06:09.280374200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/1.cc	2018-04-16 11:08:55.914204500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/2.cc.orig	2018-04-16 10:06:09.288395800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/lock/2.cc	2018-04-16 11:08:55.986397300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/1.cc.orig	2018-04-16 10:06:09.298422500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/1.cc	2018-04-16 11:08:56.057586600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/typesizes.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/typesizes.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/typesizes.cc.orig	2018-04-16 10:06:09.308449400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/native_handle/typesizes.cc	2018-04-16 11:08:56.125767100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/1.cc.orig	2018-04-16 10:06:09.317974600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/1.cc	2018-04-16 11:08:56.191943600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/2.cc.orig	2018-04-16 10:06:09.326497400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock/2.cc	2018-04-16 11:08:56.259171700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/1.cc.orig	2018-04-16 10:06:09.336523800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/1.cc	2018-04-16 11:08:56.326853300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/2.cc.orig	2018-04-16 10:06:09.347052800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/2.cc	2018-04-16 11:08:56.400049000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/3.cc.orig	2018-04-16 10:06:09.355574200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_for/3.cc	2018-04-16 11:08:56.457198100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/1.cc.orig	2018-04-16 10:06:09.364599300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/1.cc	2018-04-16 11:08:56.525438300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/2.cc.orig	2018-04-16 10:06:09.373623000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/try_lock_until/2.cc	2018-04-16 11:08:56.588119900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/unlock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/unlock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/unlock/1.cc.orig	2018-04-16 10:06:09.384200400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/recursive_timed_mutex/unlock/1.cc	2018-04-16 11:08:56.664826300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/cons/move.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/cons/move.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/cons/move.cc.orig	2018-04-16 10:06:09.392723200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/cons/move.cc	2018-04-16 11:08:56.730498500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/45133.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/45133.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/45133.cc.orig	2018-04-16 10:06:09.401747200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/45133.cc	2018-04-16 11:08:56.794168800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get.cc.orig	2018-04-16 10:06:09.410269400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get.cc	2018-04-16 11:08:56.866861300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get2.cc.orig	2018-04-16 10:06:09.418792500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/get2.cc	2018-04-16 11:08:56.929072200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/valid.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/valid.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/valid.cc.orig	2018-04-16 10:06:09.427816800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/valid.cc	2018-04-16 11:08:56.991351200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait.cc.orig	2018-04-16 10:06:09.436839900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait.cc	2018-04-16 11:08:57.055022100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_for.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_for.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_for.cc.orig	2018-04-16 10:06:09.445363600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_for.cc	2018-04-16 11:08:57.116182700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_until.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_until.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_until.cc.orig	2018-04-16 10:06:09.453885200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_future/members/wait_until.cc	2018-04-16 11:08:57.185436900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/1.cc.orig	2018-04-16 10:06:09.463911900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/1.cc	2018-04-16 11:08:57.247614800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/2.cc.orig	2018-04-16 10:06:09.472935900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/2.cc	2018-04-16 11:08:57.319806700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/3.cc.orig	2018-04-16 10:06:09.481459000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/3.cc	2018-04-16 11:08:57.374954500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/4.cc.orig	2018-04-16 10:06:09.489982300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/4.cc	2018-04-16 11:08:57.438624200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/5.cc.orig	2018-04-16 10:06:09.498505100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/5.cc	2018-04-16 11:08:57.491774100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/6.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/6.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/6.cc.orig	2018-04-16 10:06:09.507033100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/cons/6.cc	2018-04-16 11:08:57.564472300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/1.cc.orig	2018-04-16 10:06:09.516553100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/1.cc	2018-04-16 11:08:57.627151000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/2.cc.orig	2018-04-16 10:06:09.525075700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/2.cc	2018-04-16 11:08:57.677786400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/3.cc.orig	2018-04-16 10:06:09.534098800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/3.cc	2018-04-16 11:08:57.749978100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/4.cc.orig	2018-04-16 10:06:09.542121000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/locking/4.cc	2018-04-16 11:08:57.810138300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/modifiers/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/modifiers/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/modifiers/1.cc.orig	2018-04-16 10:06:09.550643800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_lock/modifiers/1.cc	2018-04-16 11:08:57.873306300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/cons/1.cc.orig	2018-04-16 10:06:09.561672000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/cons/1.cc	2018-04-16 11:08:57.925443500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/1.cc.orig	2018-04-16 10:06:09.570220100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/1.cc	2018-04-16 11:08:57.987184400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/2.cc.orig	2018-04-16 10:06:09.578717600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/2.cc	2018-04-16 11:08:58.047845600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/3.cc.orig	2018-04-16 10:06:09.588242800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/shared_timed_mutex/try_lock/3.cc	2018-04-16 11:08:58.109510500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++14 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/1.cc.orig	2018-04-16 10:06:09.597793600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/1.cc	2018-04-16 11:08:58.169697500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/2.cc.orig	2018-04-16 10:06:09.605789300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/2.cc	2018-04-16 11:08:58.234842900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/3.cc.orig	2018-04-16 10:06:09.614312900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/3.cc	2018-04-16 11:08:58.299553200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/4.cc.orig	2018-04-16 10:06:09.622333100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/this_thread/4.cc	2018-04-16 11:08:58.371559700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/1.cc.orig	2018-04-16 10:06:09.631858600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/1.cc	2018-04-16 11:08:58.426206800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/2.cc.orig	2018-04-16 10:06:09.640381100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/2.cc	2018-04-16 11:08:58.493385400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/3.cc.orig	2018-04-16 10:06:09.648903900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/3.cc	2018-04-16 11:08:58.558055500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/4.cc.orig	2018-04-16 10:06:09.657426700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/4.cc	2018-04-16 11:08:58.631405500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/49668.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/49668.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/49668.cc.orig	2018-04-16 10:06:09.665949500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/49668.cc	2018-04-16 11:08:58.687050700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/5.cc.orig	2018-04-16 10:06:09.673971400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/5.cc	2018-04-16 11:08:58.756755500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/6.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/6.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/6.cc.orig	2018-04-16 10:06:09.682994600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/6.cc	2018-04-16 11:08:58.815912800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/7.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/7.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/7.cc.orig	2018-04-16 10:06:09.695026600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/7.cc	2018-04-16 11:08:58.876576000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/8.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/8.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/8.cc.orig	2018-04-16 10:06:09.704552000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/8.cc	2018-04-16 11:08:58.941747300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/9.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/9.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/9.cc.orig	2018-04-16 10:06:09.713083900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/9.cc	2018-04-16 11:08:59.001944200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/moveable.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/moveable.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/moveable.cc.orig	2018-04-16 10:06:09.722108200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/cons/moveable.cc	2018-04-16 11:08:59.067617600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/1.cc.orig	2018-04-16 10:06:09.731132800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/1.cc	2018-04-16 11:08:59.128781600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/2.cc.orig	2018-04-16 10:06:09.740157100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/2.cc	2018-04-16 11:08:59.187937200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/3.cc.orig	2018-04-16 10:06:09.749179900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/3.cc	2018-04-16 11:08:59.252609600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/4.cc.orig	2018-04-16 10:06:09.758204500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/4.cc	2018-04-16 11:08:59.316278200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/5.cc.orig	2018-04-16 10:06:09.766727300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/5.cc	2018-04-16 11:08:59.366412600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/hardware_concurrency.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/hardware_concurrency.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/hardware_concurrency.cc.orig	2018-04-16 10:06:09.776251900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/members/hardware_concurrency.cc	2018-04-16 11:08:59.431083600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/native_handle/cancel.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/native_handle/cancel.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/native_handle/cancel.cc.orig	2018-04-16 10:06:09.786278800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/native_handle/cancel.cc	2018-04-16 11:08:59.495256200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/swap/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/swap/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/swap/1.cc.orig	2018-04-16 10:06:09.796305200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/thread/swap/1.cc	2018-04-16 11:08:59.565942000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/cons/1.cc.orig	2018-04-16 10:06:09.805830700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/cons/1.cc	2018-04-16 11:08:59.624598400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/dest/destructor_locked.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/dest/destructor_locked.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/dest/destructor_locked.cc.orig	2018-04-16 10:06:09.814855000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/dest/destructor_locked.cc	2018-04-16 11:08:59.690274400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/lock/1.cc.orig	2018-04-16 10:06:09.823878700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/lock/1.cc	2018-04-16 11:08:59.762466600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/1.cc.orig	2018-04-16 10:06:09.832401500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/1.cc	2018-04-16 11:08:59.819616900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/typesizes.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/typesizes.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/typesizes.cc.orig	2018-04-16 10:06:09.840422800 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/native_handle/typesizes.cc	2018-04-16 11:08:59.892310000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/1.cc.orig	2018-04-16 10:06:09.850449500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/1.cc	2018-04-16 11:08:59.950464600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/2.cc.orig	2018-04-16 10:06:09.858972000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock/2.cc	2018-04-16 11:09:00.018645900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/1.cc.orig	2018-04-16 10:06:09.873510500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/1.cc	2018-04-16 11:09:00.091339400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/2.cc.orig	2018-04-16 10:06:09.889052300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/2.cc	2018-04-16 11:09:00.161526300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/3.cc.orig	2018-04-16 10:06:09.908103500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_for/3.cc	2018-04-16 11:09:00.222688600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/1.cc.orig	2018-04-16 10:06:09.922641200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/1.cc	2018-04-16 11:09:00.273824900 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/2.cc.orig	2018-04-16 10:06:09.933671300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/2.cc	2018-04-16 11:09:00.337995200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/57641.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/57641.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/57641.cc.orig	2018-04-16 10:06:09.944700100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/try_lock_until/57641.cc	2018-04-16 11:09:00.392640700 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/unlock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/unlock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/unlock/1.cc.orig	2018-04-16 10:06:09.956231200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/timed_mutex/unlock/1.cc	2018-04-16 11:09:00.446784400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/1.cc.orig	2018-04-16 10:06:09.972774500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/1.cc	2018-04-16 11:09:00.503436000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/2.cc.orig	2018-04-16 10:06:09.987814700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/2.cc	2018-04-16 11:09:00.574624400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/3.cc.orig	2018-04-16 10:06:09.998844100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/3.cc	2018-04-16 11:09:00.635788500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/4.cc.orig	2018-04-16 10:06:10.010374600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/try_lock/4.cc	2018-04-16 11:09:00.702465300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/1.cc.orig	2018-04-16 10:06:10.020401500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/1.cc	2018-04-16 11:09:00.763628500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/2.cc.orig	2018-04-16 10:06:10.029927300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/2.cc	2018-04-16 11:09:00.825807500 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/3.cc.orig	2018-04-16 10:06:10.039953700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/3.cc	2018-04-16 11:09:00.886468400 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/4.cc.orig	2018-04-16 10:06:10.048977400 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/4.cc	2018-04-16 11:09:00.947629300 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/5.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/5.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/5.cc.orig	2018-04-16 10:06:10.058502600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/5.cc	2018-04-16 11:09:01.014308200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/6.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/6.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/6.cc.orig	2018-04-16 10:06:10.068027700 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/cons/6.cc	2018-04-16 11:09:01.085997200 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/1.cc.orig	2018-04-15 19:40:15.715930600 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/1.cc	2018-04-15 20:05:07.558898100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/2.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/2.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/2.cc.orig	2018-04-15 19:40:15.725458100 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/2.cc	2018-04-15 19:50:46.001007800 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/3.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/3.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/3.cc.orig	2018-04-15 19:02:32.350692200 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/3.cc	2018-04-15 19:23:05.393494600 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/4.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/4.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/4.cc.orig	2018-04-15 18:37:40.718581900 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/locking/4.cc	2018-04-15 18:48:35.087051100 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/modifiers/1.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/modifiers/1.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/modifiers/1.cc.orig	2018-04-15 18:37:40.726605000 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/30_threads/unique_lock/modifiers/1.cc	2018-04-15 18:44:34.169834000 -0400
@@ -1,4 +1,4 @@
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* powerpc-ibm-aix* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* powerpc-ibm-aix* } }
 // { dg-require-effective-target c++11 }
 // { dg-require-cstdint "" }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/ext/rope/pthread7-rope.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/ext/rope/pthread7-rope.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/ext/rope/pthread7-rope.cc.orig	2018-04-15 17:48:33.572238500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/ext/rope/pthread7-rope.cc	2018-04-15 18:10:18.571866700 -0400
@@ -17,7 +17,7 @@
 // with this library; see the file COPYING3.  If not see
 // <http://www.gnu.org/licenses/>.
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin  *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <ext/rope>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/lib/libstdc++.exp.orig gcc-7.3.0/libstdc++-v3/testsuite/lib/libstdc++.exp
--- gcc-7.3.0/libstdc++-v3/testsuite/lib/libstdc++.exp.orig	2017-01-13 09:57:33.656544000 -0500
+++ gcc-7.3.0/libstdc++-v3/testsuite/lib/libstdc++.exp	2018-04-15 18:20:25.037744400 -0400
@@ -113,7 +113,7 @@ proc libstdc++_init { testfile } {
 
     # Many hosts now default to a non-ASCII C locale, however, so
     # they can set a charset encoding here if they need.
-    if { [ishost "*-*-cygwin*"] } {
+    if { [ishost "*-*-cygwin*"] || [ishost "*-*-msys*"] } {
       setenv LC_ALL C.ASCII
       setenv LANG C.ASCII
     }
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/default_weaktoshared.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/default_weaktoshared.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/default_weaktoshared.cc.orig	2018-04-15 18:20:25.045266500 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/default_weaktoshared.cc	2018-04-15 18:25:21.584985300 -0400
@@ -17,7 +17,7 @@
 
 // TR1 2.2.2 Template class shared_ptr [tr.util.smartptr.shared]
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <tr1/memory>
diff -aurp gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/mutex_weaktoshared.cc.orig gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/mutex_weaktoshared.cc
--- gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/mutex_weaktoshared.cc.orig	2018-04-15 18:20:25.152048300 -0400
+++ gcc-7.3.0/libstdc++-v3/testsuite/tr1/2_general_utilities/shared_ptr/thread/mutex_weaktoshared.cc	2018-04-15 18:28:41.533301800 -0400
@@ -17,7 +17,7 @@
 
 // TR1 2.2.2 Template class shared_ptr [tr.util.smartptr.shared]
 
-// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-rtems* *-*-darwin* } }
+// { dg-do run { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* *-*-cygwin *-*-msys *-*-rtems* *-*-darwin* } }
 // { dg-options "-pthread" { target *-*-freebsd* *-*-dragonfly* *-*-netbsd* *-*-linux* *-*-gnu* *-*-solaris* } }
 
 #include <tr1/memory>
